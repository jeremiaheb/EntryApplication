<html>
  <head>
    <meta charset='utf-8'>
    <title>/home/jeremiah/railsProjects/EntryApplication/app/models/ability.rb</title>
    <link rel="stylesheet" href="css/coco.css" type="text/css" />
  </head>
  <body>
    <p class="menu">
      <a href="index.html">Index</a> <img src="img/coconut16.png" width="16" height="16" />
      <a href="https://github.com/lkdjiin/coco/wiki">Wiki</a> <img src="img/coconut16.png" width="16" height="16" />
      <a href="https://github.com/lkdjiin/coco">Source</a> <img src="img/coconut16.png" width="16" height="16" />
      <a href="http://lkdjiin.github.com/coco/">Web site</a>
    </p>
    <h2>/home/jeremiah/railsProjects/EntryApplication/app/models/ability.rb</h2>
    <p class="date">2013-11-18 15:18:06 -0500</p>
    
    <table class="source">
      
                    <tr class="hit" %>      
      <td><pre>1 </pre></td><td><pre>class Ability</pre></td>
        </tr>
                    <tr class="hit" %>      
      <td><pre>2 </pre></td><td><pre>  include CanCan::Ability</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>3 </pre></td><td><pre></pre></td>
        </tr>
                    <tr class="hit" %>      
      <td><pre>4 </pre></td><td><pre>  def initialize(current_diver)</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>5 </pre></td><td><pre>    # Define abilities for the passed in user here. For example:</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>6 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>7 </pre></td><td><pre>    #   user ||= User.new # guest user (not logged in)</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>8 </pre></td><td><pre>    #   if user.admin?</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>9 </pre></td><td><pre>    #     can :manage, :all</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>10 </pre></td><td><pre>    #   else</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>11 </pre></td><td><pre>    #     can :read, :all</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>12 </pre></td><td><pre>    #   end</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>13 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>14 </pre></td><td><pre>    # The first argument to `can` is the action you are giving the user </pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>15 </pre></td><td><pre>    # permission to do.</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>16 </pre></td><td><pre>    # If you pass :manage it will apply to every action. Other common actions</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>17 </pre></td><td><pre>    # here are :read, :create, :update and :destroy.</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>18 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>19 </pre></td><td><pre>    # The second argument is the resource the user can perform the action on. </pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>20 </pre></td><td><pre>    # If you pass :all it will apply to every resource. Otherwise pass a Ruby</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>21 </pre></td><td><pre>    # class of the resource.</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>22 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>23 </pre></td><td><pre>    # The third argument is an optional hash of conditions to further filter the</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>24 </pre></td><td><pre>    # objects.</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>25 </pre></td><td><pre>    # For example, here the user can only update published articles.</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>26 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>27 </pre></td><td><pre>    #   can :update, Article, :published =&gt; true</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>28 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>29 </pre></td><td><pre>    # See the wiki for details:</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>30 </pre></td><td><pre>    # https://github.com/ryanb/cancan/wiki/Defining-Abilities</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>31 </pre></td><td><pre>    #</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>32 </pre></td><td><pre></pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>33 </pre></td><td><pre>    if current_diver.role == 'admin'</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>34 </pre></td><td><pre>      can :manage, :all</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>35 </pre></td><td><pre>    elsif current_diver.role == 'manager'</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>36 </pre></td><td><pre>      can :manage, [Sample, BenthicCover, CoralDemographic, BoatLog, Dashboard]</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>37 </pre></td><td><pre>    elsif current_diver.role == 'diver'</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>38 </pre></td><td><pre>      can :create, [Sample, BenthicCover, CoralDemographic]</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>39 </pre></td><td><pre>      can :read, [Sample, BenthicCover, CoralDemographic]</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>40 </pre></td><td><pre>      can :destroy, [Sample, BenthicCover, CoralDemographic]</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>41 </pre></td><td><pre>      can :update, Sample do |sample|</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>42 </pre></td><td><pre>        sample.try(:myId) == current_diver.id</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>43 </pre></td><td><pre>      end</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>44 </pre></td><td><pre>      can :update, BenthicCover do |cover|</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>45 </pre></td><td><pre>        cover.try(:myId) == current_diver.id</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>46 </pre></td><td><pre>      end</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>47 </pre></td><td><pre>      can :update, CoralDemographic do |coral_demographic|</pre></td>
        </tr>
                    <tr class="miss">
      
      <td><pre>48 </pre></td><td><pre>        coral_demographic.try(:myId) == current_diver.id</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>49 </pre></td><td><pre>      end</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>50 </pre></td><td><pre>    end</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>51 </pre></td><td><pre></pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>52 </pre></td><td><pre>  end</pre></td>
        </tr>
                    <tr class="never">
      
      <td><pre>53 </pre></td><td><pre>end</pre></td>
        </tr>
            
    </table>
  </body>
</html>
